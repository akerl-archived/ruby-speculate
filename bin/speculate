#!/usr/bin/env ruby

require 'speculate'
require 'mercenary'

Mercenary.program(:speculate) do |p|
  p.version Speculate::VERSION
  p.description 'Tool for assuming roles in AWS accounts'
  p.syntax 'speculate [options] account-id role-name'

  p.action do |_, options|
    account_id, role_name = ARGV.shift 2
    if !account_id || !role_name
      puts p
      exit 1
    end
    options[:account_id] = account_id
    options[:role_name] = role_name
    Speculate.new(options).print!
  end
end
